Есть многоэтажное здание с несколькими лифтами. Лифты должны обслуживать запросы пассажиров, которые нажимают кнопки вызова на этажах или внутри лифта для выбора этажа. Задача — смоделировать работу этих лифтов с использованием многопоточности.

Условия:
Лифты: Несколько лифтов (например, 3) движутся вверх и вниз по зданию. Каждый лифт может быть только на одном этаже в любой момент времени.

Этажи: Здание состоит из N этажей. Пассажиры могут вызывать лифт, нажав кнопку вызова на любом этаже, чтобы поехать вверх или вниз.

Запросы: Каждый пассажир может нажимать кнопку вызова на этаже и выбирать нужный этаж, когда они попадают в лифт.

Логика работы лифта:

Лифт может быть вызван на любой этаж, где ожидает пассажир.
Лифт должен останавливаться на этажах, чтобы забрать и высадить пассажиров.
Если на данный момент у лифта нет активных вызовов, он переходит в режим ожидания на ближайшем этаже.
При наличии нескольких запросов, лифт должен обрабатывать их оптимально: например, следуя в одном направлении до тех пор, пока в этом направлении есть запросы, а затем изменяя направление.
Требования к многопоточности:
Отдельные потоки для каждого лифта: Каждый лифт должен работать в своем отдельном потоке.
Синхронизация запросов: Запросы от пассажиров (вызовы лифта) должны быть общими для всех лифтов, и их обработка должна быть синхронизирована.
Учет состояния лифтов: Лифты должны корректно управляться с учетом их текущего положения, направления движения и состояния (ожидание, движение вверх или вниз, двери открыты/закрыты).
Возможные классы:
PassengerRequest (Запрос пассажира):

Этаж вызова
Направление (вверх или вниз)
Целевой этаж
Elevator (Лифт):

Текущий этаж
Текущие пассажиры
Направление движения
Очередь запросов
Building (Здание):

Количество этажей
Список лифтов
Общий список запросов на вызов лифта с каждого этажа
Dispatcher (Диспетчер):

Управляет распределением запросов между лифтами, выбирая, какой лифт отправить на вызов.